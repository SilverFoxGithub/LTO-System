<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 1 Assessment Test (Part 1)</title>
    <link rel="stylesheet" href="../assets/styles/test-style.css">
    <style>
    .complete-button:disabled {
        background-color: #ccc !important;
        color: #888 !important;
        cursor: not-allowed;
        opacity: 0.7;
        border: 1px solid #aaa;
    }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Day 1 Assessment Test (Part 1)</h1>

        <form id="testForm">
            <div class="question">
                <p>Who is a Professional Driver? (Sino ang propesyonal na drayber?)</p>
                <label><input type="radio" name="q1" value="a"> a. An expert and experienced driver (isang eksperto at ekspiryensado sa pagmamaneho)</label><br>
                <label><input type="radio" name="q1" value="b"> b. Any driver who can operate a specific motor vehicle category (sinumang drayber na nakapagmamaneho ng isang uri ng sasakyang de-motor)</label><br>
                <label><input type="radio" name="q1" value="c" data-correct="true"> c. Any driver who has a qualification to drive a Private or For Hire Vehicle (sinumang drayber na may kwalipikasyong magmaneho ng pribado o paupahang sasakyang de-motor)</label><br>
            </div>

            <div class="question">
                <p>How many days do you need to settle a traffic violation with LTO? (Ilang araw dapat asikasuhin sa LTO ang paglabag sa batas trapiko?)</p>
                <label><input type="radio" name="q2" value="a" data-correct="true"> a. Within 15 days (Sa loob ng 15 araw)</label><br>
                <label><input type="radio" name="q2" value="b"> b. Within 10 days (Sa loob ng 10 araw)</label><br>
                <label><input type="radio" name="q2" value="c"> c. Within 30 days (Sa loob ng 30 araw)</label><br>
            </div>

            <div class="question">
                <p>What is the maximum validity of license that a driver may have if he/she has no traffic violation at the time of renewal? (Ilang taon ang maaaring ibigay na lisenysa sa isang drayber na walang traffic violation?)</p>
                <label><input type="radio" name="q3" value="a"> a. 5 years validity</label><br>
                <label><input type="radio" name="q3" value="b" data-correct="true"> b. 10 years validity</label><br>
                <label><input type="radio" name="q3" value="c"> c. 15 years validity</label><br>
            </div>

             <div class="question">
                <p>Can a driver be given a 10-year validity license if he/she has traffic violation/s? (Maaari bang bigyan ng 10 taon na lisensya ang isang drayber kung ito ay mayroong huli o traffic violation?</p>
                <label><input type="radio" name="q4" value="a" data-correct="true"> a. No (hindi)</label><br>
                <label><input type="radio" name="q4" value="b"> b. Yes (Oo)</label><br>
                <label><input type="radio" name="q4" value="c"> c. Yes - if all penalties are paid 15 days prior to renewal (Oo kung ang penalty ay nabayaran labin-limang araw bago mag-renew)</label><br>
            </div>

            <div class="question">
                <p>What is the allowed age to apply for a Non Professional driver's license? (Ano ang tamang edad upang magkaroon ng lisensya?)</p>
                <label><input type="radio" name="q5" value="a"> a. 16 years old</label><br>
                <label><input type="radio" name="q5" value="b" data-correct="true"> b. 17 years old</label><br>
                <label><input type="radio" name="q5" value="c"> c. 20 Years old</label><br>
            </div>

            <div class="question">
                <p>Registration of motor vehicle may be suspended if: (Maaaring isuspinde ang rehistro ng sasakayan kung ito ay:)</p>
                <label><input type="radio" name="q6" value="a"> a. motor vehicle is found to be in conformity with regulations (kung ang sasakyan ay maayos na nakapasa sa inspeksyon)</label><br>
                <label><input type="radio" name="q6" value="b" data-correct="true"> b. motor vehicle is found to be unsightly (ang sasakyan ay hindi kaaya-aya)</label><br>
                 <label><input type="radio" name="q6" value="c"> c. motor vehicle is not registered to the driver at the time of apprehension 9 ang sasakyan ay hindi rehistrado sa nagmamaneho sa oras ng pagkahuli nito)</label><br>
            </div>

            <div class="question">
                <p>Where do you need to display your plate number? (Saan dapat ilagay ang plaka ng isang sasakyan?)</p>
                <label><input type="radio" name="q7" value="a" data-correct="true"> a. one in front and one in the rear of the vehicle (isa sa harap at isa sa likod ng sasakyan)</label><br>
                <label><input type="radio" name="q7" value="b"> b. two in front (dalawa sa harap)</label><br>
                <label><input type="radio" name="q7" value="c"> c. one in the front windshield and one at the back windshield (isa sa harap na windshield at isa sa likurang salamin)</label><br>
            </div>

            <div class="question">
                <p>This traffic sign means "Yield the right of way" (Ang senyas trapiko na ito ay nangangahulugang "magbigay daan":)</p>
                <label><input type="radio" name="q8" value="a" data-correct="true"> a. inverted triangle (baligtad na tatsulok)</label><br>
                <label><input type="radio" name="q8" value="b"> b. vertical triangle (patayong tatsulok)</label><br>
                <label><input type="radio" name="q8" value="c"> c. horizontal triangle (pahalang na tatsulok)</label><br>
            </div>

            <div class="question">
                <p>What is the main purpose of traffic laws, rules and regulations? (Ano ang pangunahing layunin ng mga batas, alituntunin at regulasyongpantrapiko?)</p>
                <label><input type="radio" name="q9" value="a"> a. To generate revenues for the government (Upang kumita ng pera ang pamahalaan)</label><br>
                <label><input type="radio" name="q9" value="b"> b. To discipline the motorists (Disiplinahin ang mga motorista)</label><br>
                <label><input type="radio" name="q9" value="c" data-correct="true"> c. To put order on the road (Magkaroon ng maayos na galaw ang mga sasakyan at ang mga tumatawid sa kalsada)</label><br>
            </div>

            <div class="question">
                <p>Green light at an intersection means: (Ang kulay berdeng ilaw sa isang interseksiyon ay nangangahulugan na:)</p>
                <label><input type="radio" name="q10" value="a"> a. pedestrians are allowed to cross all pedestrian lanes (pinahihintulutang tumawid sa lahat ng tawiran ang mga tao)</label><br>
                <label><input type="radio" name="q10" value="b" data-correct="true"> b. pedestrians are not allowed to cross all pedestrian lanes (hindi pinahihintulutang tumawid sa lahat ng tawiran ang mga tao)</label><br>
                <label><input type="radio" name="q10" value="c"> c. the vehicles on the other street are stopped (ang mga sasakyan sa kabilang kalsada ay nakahinto)</label><br>
            </div>

            <div class="question">
                <p>Flashing yellow light means: (Ang kumikisap-kisap na dilaw na ilaw pantrapiko ay nangangahulugan na:)</p>
                <label><input type="radio" name="q11" value="a" data-correct="true"> a. slowdown and proceed with caution (bagalan ang takbo at dumiretso nang may pag-iingat)</label><br>
                <label><input type="radio" name="q11" value="b"> b. you have the right of way over a flashing yellow light (ikaw ang may higit na karapatan kaysa sa kumikisap-kisap na dilawna ilaw)</label><br>
                <label><input type="radio" name="q11" value="c"> c. vehicles will be crossing from the other side (may mga sasakyang tatawid mula sa kabila)</label><br>
            </div>

            <div class="question">
                <p>Parking is allowed if the vehicle is (Pinahihintulutan ang pagparada kung ang sasakyan ay_)</p>
                <label><input type="radio" name="q12" value="a" data-correct="true"> a. beyond 4 meters of a fire hydrant (lampas 4 na metro sa boka-insendiyo)</label><br>
                <label><input type="radio" name="q12" value="b"> b. within 3 meters of the intersection of curve lines (nasa loob ng 3 metro ng interseksiyon ng mga linyang kurbada)</label><br>
                <label><input type="radio" name="q12" value="c"> c. on the intersection (nasa interseksyon)</label><br>
            </div>

            <div class="question">
                <p>Normally, on a two-lane road, overtaking is allowed at the: (Sa kalsadang pandalawahang sasakyan, ang pag-overtake ay pinahihintulutan sa:)</p>
                <label><input type="radio" name="q13" value="a"> a. shoulder or pavement of the road (kanang bahagi ng kalsada o bangketa)</label><br>
                <label><input type="radio" name="q13" value="b"> b. blind curve with a yellow solid line (kurbada/blind curve na may buong linyang dilaw)</label><br>
                <label><input type="radio" name="q13" value="c" data-correct="true"> c. left lane (kaliwang lane)</label><br>
            </div>

            <div class="question">
                 <p>When do you have to make a complete full stop? (Kailan ka dapat ganap na huminto?)</p>
                <label><input type="radio" name="q14" value="a"> a. At a flashing yellow light (Kapag may dilaw na ilaw na kumikisap-kisap)</label><br>
                <label><input type="radio" name="q14" value="b" data-correct="true"> b. At a red traffic light (Kapag pula ang ilaw trapiko)</label><br>
                <label><input type="radio" name="q14" value="c"> c. At an intersection (Kapag nasa interseksyon)</label><br>
            </div>

            <div class="question">
                <p>The proper hand signal for a right turn is: (Ang tamang senyas ng kamay kapag kumakanan ay:)</p>
                <label><input type="radio" name="q15" value="a"> a. left arm pointing left (ang kaliwang braso nakaturo sa kaliwa)</label><br>
                <label><input type="radio" name="q15" value="b" data-correct="true"> b. left arm held pointing upward (ang kaliwang braso ay nakaturo sa itaas)</label><br>
                <label><input type="radio" name="q15" value="c"> c. left arm held down, hand pointing at ground (ang kaliwang braso ay nakapababa, na ang kamay ay nakaturo saibaba)</label><br>
            </div>

            <div class="question">
                <p>Single white broken line on a 2-way road means: (Ang putting putol-putol na linya sa kalsadang salubungan aynangangahulugan na:)</p>
                <label><input type="radio" name="q16" value="a"> a. passing or overtaking can be made anytime (ang paglampas o ang pag-overtake ay maaaring gawin anumangoras)</label><br>
                <label><input type="radio" name="q16" value="b" data-correct="true"> b. it separates traffic moving in opposite directions (hinihiwalay nito ang pagdaloy ng mga sasakyan sa magkabilangdireksiyon)</label><br>
                <label><input type="radio" name="q16" value="c"> c. absolutely no crossing (talagang hindi ipinahihintulot ang pag-cross)</label><br>
            </div>

            <div class="question">
                <p>What is the meaning of double solid yellow line? (Ano ang kahulugan ng dobleng linyang dilaw?)</p>
                <label><input type="radio" name="q17" value="a"> a. Cross with due care (Tumawid nang maingat)</label><br>
                <label><input type="radio" name="q17" value="b"> b. Cross anytime (Tumawid anumang oras)</label><br>
                <label><input type="radio" name="q17" value="c" data-correct="true"> c. Crossing/traversing or overtaking is not allowed (Ang pagtawid o paglusot ay hindi pinahihintulutan)</label><br>
            </div>

            <div class="question">
                <p>Upon approaching an intersection marked with a yield sign, you are required to (Kapag papalapit sa interseksiyong may karatulang nagsasabing magbigay daan (yield), kailangang )</p>
                <label><input type="radio" name="q18" value="a"> a. stop before entering the intersection (huminto bago pumasok sa interseksiyon)</label><br>
                <label><input type="radio" name="q18" value="b" data-correct="true"> b. slowdown, then enter the intersection when the way is clear (bagalan ang takbo at pagkatapos ay pumasok sa interseksiyon kungligtas)</label><br>
                <label><input type="radio" name="q18" value="c"> c. enter the intersection immediately (pumasok agad sa interseksiyon)</label><br>
            </div>

            <div class="question">
                <p>The holder of a driver's license shall entitle him/her to operate: (Ang lisensiya ay nagpapahintulot sa drayber na magmaneho ng:)</p>
                <label><input type="radio" name="q19" value="a"> a. any kind of motor vehicle (anumang uri ng sasakyang de-motor)</label><br>
                <label><input type="radio" name="q19" value="b" data-correct="true"> b. motor vehicle/s specified in the license only (mga sasakyan lamang na nakatakda sa lisensiya)</label><br>
                <label><input type="radio" name="q19" value="c"> c. motor vehicles for hire only (mga pampublikong sasakyan lamang)</label><br>
            </div>

            <div class="question">
                <p>When may you lend your driver's license? (Kailan mo maaaring ipahiram ang iyong lisensiya?)</p>
                <label><input type="radio" name="q20" value="a" data-correct="true"> a. Under no circumstances (Hindi maaari kahit kailan)</label><br>
                <label><input type="radio" name="q20" value="b"> b. To another person who is learning to drive (Sa indibiduwal na nag-aaral magmaneho)</label><br>
                <label><input type="radio" name="q20" value="c"> c. In emergencies (Sa oras ng kagipitan o emergency)</label><br>
            </div>

            <div class="question">
                <p>At an intersection without stop or yield signs, two cars approach at right angles to each other at almost the same time. Which driver must yield? (Sa interseksiyon na walang mga karatulang nagsasabing huminto o magbigay ng daan, dalawang sasakyan ang sabay na dumating sa anggulong 90 digri sa isa't isa. Sinong drayber ang dapat magbigay daan?)</p>
                <label><input type="radio" name="q21" value="a"> a. The motorist on the right (Ang drayber ng sasakyan sa kanan)</label><br>
                <label><input type="radio" name="q21" value="b" data-correct="true"> b. The motorist on the left (Ang drayber ng sasakyan sa kaliwa)</label><br>
                <label><input type="radio" name="q21" value="c"> c. Either of the driver has the first right-of-way (Alinman sa dalawa ay may unang karapatan)</label><br>
            </div>

            <div class="question">
                <p>Is it allowed to drive a motorcycle in a public road pending release of the Certificate of Registration? (Maaari bang gamitin sa pampublikong daan ang motorsiklo kung ito ay wala pang rehistro?)</p>
                <label><input type="radio" name="q22" value="a" data-correct="true"> a. No (Hindi)</label><br>
                <label><input type="radio" name="q22" value="b"> b. Yes (Oo)</label><br>
                <label><input type="radio" name="q22" value="c"> c. Yes, if travel authority is given by the dealer (Oo, kung ang pagbiyahe ay may pahintulot ang dealer nito)</label><br>
            </div>

            <div class="question">
                <p>Which of the following statement is true? (Alin sa mga sumusunod na pahayag ang totoo?)</p>
                <label><input type="radio" name="q23" value="a"> a. A DL holder with authority to drive vehicles with manual transmission (MT) is not allowed to drive vehicles with automatic transmission (AT) (Ang isang may hawak ng DL na may awtoridad na magmaneho ng manual transmission (MT) ay hindi pinapayagan na magmaneho ng mga sasakyan na automatic transmission (AT)</label><br>
                <label><input type="radio" name="q23" value="b"> b. A DL holder with authority to drive vehicles with automatic transmission (AT) is allowed to drive vehicles with manual transmission (MT) (Ang drayber na may hawak na lisensya para sa atomatik na sasakyan ay pwedeng magmaneho ng sasakyang manwal.)</label><br>
                <label><input type="radio" name="q23" value="c" data-correct="true"> c. A DL holder with authority to drive vehicles with manual transmission (MT) is allowed to operate vehicles with automatic transmission (AT) (Ang drayber na may hawak ng lisensya para sa manual transmission ay maaaring magmaneho ng may automatik na transmission</label><br>
            </div>

            <div class="question">
                <p>Can you drive a motorcycle if your license bears DL Code B? (Maaari ka bang magmaneho ng motorsiklo kung ang iyong lisensya ay may DL Code B?)</p>
                <label><input type="radio" name="q24" value="a"> a. Yes (Oo)</label><br>
                <label><input type="radio" name="q24" value="b"> b. No, unless authorized by a traffic enforcer (Hindi, maliban kung pinahintulutan ng traffic enforcer)</label><br>
                <label><input type="radio" name="q24" value="c" data-correct="true"> c. No (Hindi)</label><br>
            </div>

            <div class="question">
                <p>Identify this traffic sign: (Tukuyin kung anong senyas ito:)</p>
                <img src="../assets/road-signs/q25.png">
                <label><input type="radio" name="q25" value="a" data-correct="true"> a. no u-turn (bawal mag u-turn)</label><br>
                <label><input type="radio" name="q25" value="b"> b. dangerous left bend (mapanganib na kaliwang likuan)</label><br>
                <label><input type="radio" name="q25" value="c"> c. dangerous right bend (mapanganib na kanang likuan)</label><br>
            </div>

            <div class="question">
                <p>Identify this traffic sign: (Tukuyin kung anong senyas ito:)</p>
                <img src="../assets/road-signs/q26.png">
                <label><input type="radio" name="q26" value="a" data-correct="true"> a. road widens ahead (lalapad ang kalsada sa unahan)</label><br>
                <label><input type="radio" name="q26" value="b"> b. slippery road ahead (madulas ang kalsada sa unahan)</label><br>
                <label><input type="radio" name="q26" value="c"> c. road narrows ahead (papaliit na kalsada sa unahan)</label><br>
            </div>

            <div class="question">
                <p>Identify this traffic sign: (Tukuyin kung anong senyas ito:)</p>
                <img src="../assets/road-signs/q27.png">
                <label><input type="radio" name="q27" value="a" data-correct="true"> a. no blowing of horn (bawal bumusina)</label><br>
                <label><input type="radio" name="q27" value="b"> b. animals crossing (may mga hayop na tumatawid)</label><br>
                <label><input type="radio" name="q27" value="c"> c. dangerous bend (mapanganib na likuan)</label><br>
            </div>

            <div class="question">
                <p>Identify this traffic sign: (Tukuyin kung anong senyas ito:)</p>
                <img src="../assets/road-signs/q28.png">
                <label><input type="radio" name="q28" value="a"> a. Road narrows (papaliit ang daan)</label><br>
                <label><input type="radio" name="q28" value="b" data-correct="true"> b. Roundabout (rotunda)</label><br>
                <label><input type="radio" name="q28" value="c"> c. no entry for all types of vehicle (bawal pumasok ang lahat ng uri ng sasakyan)</label><br>
            </div>

            <div class="question">
                <p>Identify this traffic sign: (Tukuyin kung anong senyas ito:)</p>
                <img src="../assets/road-signs/q29.png">
                <label><input type="radio" name="q29" value="a" data-correct="true"> a. slippery road (madulas na kalsada)</label><br>
                <label><input type="radio" name="q29" value="b"> b. winding road (paikot na daan)</label><br>
                <label><input type="radio" name="q29" value="c"> c. curve ahead (may kurbada sa unahan)</label><br>
            </div>

            <div class="question">
                <p>What is the meaning of this traffic sign? (Ano ang ibig sabihin ng senyas na ito)</p>
                <img src="../assets/road-signs/q30.png">
                <label><input type="radio" name="q30" value="a"> a. Pedestrian crossing (Tawiran)</label><br>
                <label><input type="radio" name="q30" value="b" data-correct="true"> b. Pedestrian crossing ahead (Papalapit na tawiran)</label><br>
                <label><input type="radio" name="q30" value="c"> c. Caution - School Zone (Paalala-paaralan)</label><br>
            </div>

            <button type="button" onclick="submitTest1()">Submit Test</button>
            <div id="results" class="results"></div>
        </form>

        <div class="navigation">
            <button onclick="goToDashboard()" class="dashboard-button">Back to Dashboard</button>
            <button onclick="markAsCompleted(5, 6)" class="complete-button">Mark as Completed</button>
            <button onclick="retryTest()" class="retry-button" style="display:none;">Retry</button>
            <!-- <a href="day1_test2.html" class="next-button">Next Lesson: Day 1 Assessment Test (Part 2)</a> -->
        </div>
    </div>

<script src="../assets/scripts/test1.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("testForm");
  const questions = Array.from(form.querySelectorAll(".question"));
  const submitBtn = document.querySelector("button[onclick^='submitTest']");
  const completeBtn = document.querySelector(".complete-button");
  const resultBox = document.getElementById("results");
  const total = questions.length;
  const passingScore = Math.ceil(total * 0.8); // 80%

  // Move submit button to bottom
  const nav = document.querySelector(".navigation");
  nav.appendChild(submitBtn);

  // Randomize question order
   questions.sort(() => Math.random() - 0.5);
   questions.forEach(q => form.insertBefore(q, resultBox));

  // Timer setup (30 minutes)
  let time = 30 * 60;
  const timerDiv = document.createElement("div");
  timerDiv.id = "exam-timer";
  timerDiv.style = "position: absolute; top: 20px; left: 20px; font-weight: bold; color: red;";
  document.querySelector(".test-container").prepend(timerDiv);

  const timerInterval = setInterval(() => {
    const mins = String(Math.floor(time / 60)).padStart(2, "0");
    const secs = String(time % 60).padStart(2, "0");
    timerDiv.textContent = `⏳ Time Left: ${mins}:${secs}`;
    if (time <= 0) {
      clearInterval(timerInterval);
      submitTest();
    }
    time--;
  }, 1000);

  // Submit Test function
  window.submitTest1 = window.submitTest2 = submitTest;

function submitTest() {
  // Check if all questions have been answered
  let allAnswered = true;
  questions.forEach(q => {
    const selected = q.querySelector("input:checked");
    if (!selected) {
      allAnswered = false;
      q.style.border = "2px solid red"; // highlight unanswered
    } else {
      q.style.border = "none"; // remove highlight if answered
    }
  });

  if (!allAnswered) {
    alert("❗ Please answer all questions before submitting.");
    return; // stop submission
  }

  clearInterval(timerInterval);
  let correct = 0;

  questions.forEach(q => {
    const selected = q.querySelector("input:checked");
    if (selected?.dataset.correct === "true") correct++;
  });

  // Calculate percentage
  const percentage = Math.round((correct / total) * 100);

  // Send score to the server
  fetch("../api/save_test_score_test1.php", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: `test_score=${correct}`
})
.then(response => {
    if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
})
.then(data => {
    if (data.success) {
        console.log("Score saved successfully:", correct);
    } else {
        console.error("Error saving score:", data.message);
        alert("Failed to save score: " + data.message);
    }
})
.catch(err => {
    console.error("Network error details:", err);
    alert(`Failed to save score due to a network error: ${err.message}`);
});
  // Disable inputs and buttons
  form.querySelectorAll("input").forEach(el => el.disabled = true);
  form.querySelectorAll("button").forEach(btn => {
    if (!btn.classList.contains("dashboard-button")) {
      btn.disabled = true;
    }
  });

  resultBox.innerHTML = `
    <h3>📝 You got ${correct}/${total} correct (${percentage}%)</h3>
    <p style="color: ${correct >= passingScore ? 'green' : 'red'};">
      ${correct >= passingScore ? '✅ Congratulations! You passed.' : '❌ You did not reach the passing score of 80%.'}
    </p>
  `;

  completeBtn.disabled = correct < passingScore;

  const retryBtn = document.querySelector(".retry-button");
  retryBtn.style.display = "inline-block";
  retryBtn.onclick = () => location.reload();
}  completeBtn.disabled = true;

  // Add event listener to Complete button
  completeBtn.addEventListener("click", () => {
    const currentLessonId = completeBtn.dataset.currentLesson;
    const nextLessonId = completeBtn.dataset.nextLesson;
    markAsCompleted(currentLessonId, nextLessonId);
  });
});

// Go to Dashboard
function goToDashboard() {
  window.location.href = "student.html";
}

// Save progress and redirect
function markAsCompleted(currentLessonId, nextLessonId) {
  fetch("../api/save_progress.php", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: `lesson_id=${currentLessonId}&completion_percentage=100`
  })
  .then(() => {
    alert("Marked as completed! Next unlocked.");
    window.location.href = "student.html";
  })
  .catch(err => {
    console.error("Error saving progress:", err);
    alert("Failed to mark as completed.");
  });
}
</script>


</body>
</html>