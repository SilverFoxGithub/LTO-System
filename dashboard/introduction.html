<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Driving</title>
    <link rel="stylesheet" href="../assets/styles/lesson-style.css">
</head>
<body>
    <div class="lesson-container">
        <h1>Introduction to Driving (PDF)</h1>

        <iframe src="../lessons/1_introduction.pdf#toolbar=0&navpanes=0&scrollbar=0&view=FitH" width="100%" height="600px" style="border: none;"></iframe>

        <div class="navigation">
            <button onclick="goToDashboard()" class="dashboard-button">Back to Dashboard</button>
            <button onclick="markAsCompleted(1, 2)" class="complete-button next-button">Mark as Completed</button>
            <!-- <a href="road_traffic_rules.html" class="next-button">Next Lesson: Road and Traffic Rules</a> -->
        </div>
    </div>

    <script src="../assets/scripts/student.js"></script>
    <script>
        function goToDashboard() {
            window.location.href = "student.html";
        }

        function markAsCompleted(currentLessonId, nextLessonId) {
            fetch("../api/save_progress.php", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                credentials: "include", // âœ… Required to keep the session alive
                body: `lesson_id=${currentLessonId}&completion_percentage=100`
            })
            .then(response => response.text())
            .then(data => {
                alert("Lesson marked as completed! The next lesson is now unlocked.");
                window.location.href = "student.html";
            })
            .catch(error => console.error("Error saving progress:", error));
        }
    </script>
</body>
</html>